---
## Author
author:
  name: Верниковская Екатерина Андреевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №1"
subtitle: "Дисциплина: Администрирование локальных сетей"
license: "CC BY"
---

# Цель работы

Целью данной работы является установка инструмента моделирования конфигурации сети Cisco Packet
Tracer, знакомство с его интерфейсом

# Задание

1. Установить на домашнем устройстве Cisco Packet Tracer
2. Построить простейшую сеть в Cisco Packet Tracer, провести простейшую настройку оборудования

# Выполнение лабораторной работы

## Запуск Cisco Packet Tracer без использования сетевого соединения

Установили в нашей операционной системе Cisco Packet Tracer ([рис. @fig-001]), ([рис. @fig-002])

![Установка Cisco Packet Tracer (1)](image/лаба1_1.png){#fig-001 width=70%}

![Установка Cisco Packet Tracer (2)](image/лаба1_2.png){#fig-002 width=70%}

Запустили Cisco Packet Tracer с помощью команды ```packettracer```, требуется вход в учётную запись ([рис. @fig-003]), ([рис. @fig-004])

![Запуск Cisco Packet Tracer](image/лаба1_3.png){#fig-003 width=70%}

![Ошибка входа](image/лаба1_4.png){#fig-004 width=70%}

Устанавили firejail командой ```sudo apt install firejail``` ([рис. @fig-005])

![Установка firejail](image/лаба1_5.png){#fig-005 width=70%}

Далее запустили Packet Tracer с отключённой сетью командой ```firejail --net=none --noprofile packettracer``` ([рис. @fig-006]), ([рис. @fig-007])

![Запуск Cisco Packet Tracer с отключённой сетью](image/лаба1_6.png){#fig-006 width=70%}

![Рабочее пространство Packet Tracer](image/лаба1_7.png){#fig-007 width=70%}

## Построение простейшей сети

Создали новый проект. В рабочем пространстве разместили концентратор (Hub-PT) и четыре оконечных устройства PC. Соединили оконечные устройства с концентратором прямым кабелем ([рис. @fig-008])

![Модель простой сети с концентратором](image/лаба1_8.png){#fig-008 width=70%}

Задали статические IP-адреса 192.168.1.11, 192.168.1.12, 192.168.1.13, 192.168.1.14 с маской подсети 255.255.255.0 ([рис. @fig-009]), ([рис. @fig-010]), ([рис. @fig-011]), ([рис. @fig-012])

![IP-адрес для PC0](image/лаба1_9.png){#fig-009 width=70%}

![IP-адрес для PC1](image/лаба1_10.png){#fig-010 width=70%}

![IP-адрес для PC2](image/лаба1_11.png){#fig-011 width=70%}

![IP-адрес для PC3](image/лаба1_12.png){#fig-012 width=70%}

В основном окне проекта перешли из режима реального времени (Realtime) в режим моделирования (Simulation) ([рис. @fig-013])

![Режим моделирования](image/лаба1_13.png){#fig-013 width=70%}
 
На панели инструментов выбрали «Add Simple PDU (P)» ([рис. @fig-014])

![Add Simple PDU (P)](image/лаба1_14.png){#fig-014 width=70%}

Щёлкнули сначала на PC0, затем на PC2. В рабочей области появились два конверта, обозначающих пакеты, в списке событий на панели моделирования появились два события, относящихся к пакетам ARP и ICMP ([рис. @fig-015]), ([рис. @fig-016])

![2 конверта, обозначающих пакеты (1)](image/лаба1_15.png){#fig-015 width=70%}

![События в режиме моделирования Packet Tracer (1)](image/лаба1_16.png){#fig-016 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за движением пакетов ARP и ICMP от устройства PC0 до устройства PC2 и обратно. Пакет ARP движется от PC0 к Hub0. Концентратор рассылает его остальным пк - PC1, PC2 и PC3. Но принимает пакет только PC2 (т.к. именно ему был предназначен пакет). Обратно пакет отправляется также - сначала до Hub0. Hub0 рассылает его остальным PC1, PC0 и PC3, но принимает только PC0. С ICMP происходит всё тоже самое

Открыли окно информации о PDU и изучили, что происходит на уровне модели OSI при перемещении пакета ([рис. @fig-017])

![Информация о PDU: уровень OSI](image/лаба1_17.png){#fig-017 width=70%}

Используя кнопку «Проверь себя» (Challenge Me) на вкладке OSI Model, ответили на вопросы ([рис. @fig-018])

![Challenge Me](image/лаба1_18.png){#fig-018 width=70%}

Открыли вкладку с информацией о PDU и исследовали структуру пакета ICMP. ([рис. @fig-019])

![Информация о PDU: формат пакета ICMP (1)](image/лаба1_19.png){#fig-019 width=70%}

Изначально в нём содержится заголовок IP с информацией о версии, и IP-адресах отправителя и получателя. Также есть заголовок ICMP, в котором содержится информация о типе  ICMP-пакета, его коде, контрольной сумме, его идентификаторе и порядковом номере.

Далее формируется кадр Ethernet:

- поле преамбулы (7 байт)
- поле SFD
- Destination Address (адрес получателя)
- Source Address (адрес отправителя)
- Тип протокола
- FCS — frame check sequence (4 байта). Предназначенно для проверки целостности данных и обнаружения ошибок при передаче

MAC-адреса:

- 0001.C9D4.E4DE (PC3)
- 00D0.FFCD.8662 (PC0)

Первые три байта указывают на производителя, а последние три - уникальный идентификатор устройства

Далее очистили список событий, удалив сценарий моделирования. Выбрали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC0, затем на PC2. Снова выбрали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC2, затем на PC0 ([рис. @fig-020])

![Сценарий для проверки коллизии (1)](image/лаба1_20.png){#fig-020 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за возникновением коллизии ([рис. @fig-021])

![Сценарий с возникновением коллизии (1)](image/лаба1_21.png){#fig-021 width=70%}

В списке событий посмотрели информацию о PDU, посмотрели как отображается в заголовках пакетов информация о коллизии. Коллизия возникает, так как концентратор не может одновременно обработать два пакета, что приводит к ошибке ([рис. @fig-022])

![Информация о коллизии в заголовках пакетов](image/лаба1_22.png){#fig-022 width=70%}

Перешли в режим реального времени. В рабочем пространстве разместили коммутатор (Cisco 2950-24) и 4 оконечных устройства PC. Соединили оконечные устройства с коммутатором прямым кабелем ([рис. @fig-023])

![Модель простой сети с коммутатором](image/лаба1_23.png){#fig-023 width=70%}

Задайли статические IP-адреса 192.168.1.21, 192.168.1.22, 192.168.1.23, 192.168.1.24 с маской
подсети 255.255.255.0 ([рис. @fig-024]), ([рис. @fig-025]), ([рис. @fig-026]), ([рис. @fig-027])

![IP-адрес для PC4](image/лаба1_24.png){#fig-024 width=70%}

![IP-адрес для PC5](image/лаба1_25.png){#fig-025 width=70%}

![IP-адрес для PC6](image/лаба1_26.png){#fig-026 width=70%}

![IP-адрес для PC7](image/лаба1_27.png){#fig-027 width=70%}

На панели инструментов выбрали «Add Simple PDU (P)». Щёлкнули сначала на PC4, затем на PC6. В рабочей области появились два конверта, обозначающих пакеты, в списке событий на панели моделирования появились два события, относящихся к пакетам ARP и ICMP ([рис. @fig-028]), ([рис. @fig-029])

![2 конверта, обозначающих пакеты (2)](image/лаба1_28.png){#fig-028 width=70%}

![События в режиме моделирования Packet Tracer (2)](image/лаба1_29.png){#fig-029 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за движением пакетов ARP и ICMP от устройства PC4 до устройства PC6 и обратно. Пакет ARP движется от PC4 к Switch0. Коммутатор рассылает его остальным пк - PC5, PC6 и PC7 (также как и концентратор). Принимает пакет только PC6 (т.к. именно ему был предназначен пакет). Обратно пакет отправляется сначала до Switch0. Switch0 отправляет его только PC4. С ICMP происходит всё тоже самое. В отличии от Hub0, Switch0 запомнил путь до нужного PC6 и не рассылает пакет всем

Исследовали структуру пакета ICMP. Она такая же ([рис. @fig-030])

![Информация о PDU: формат пакета ICMP (2)](image/лаба1_30.png){#fig-030 width=70%}

Далее очистили список событий, удалив сценарий моделирования. Выбрали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC4, затем на PC6. Снова выбрали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC6, затем на PC4 ([рис. @fig-031])

![Сценарий для проверки коллизии (2)](image/лаба1_31.png){#fig-031 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за тем что коллизия не возникла. Коллизия не возникает, так как коммутатор изучает MAC-адреса и отправляет данные только конкретному получателю, а не всем устройствам ([рис. @fig-032])

![Сценарий без возникновения коллизии](image/лаба1_32.png){#fig-032 width=70%}

Перешли в режим реального времени (Realtime). В рабочем пространстве соединили кроссовым кабелем концентратор и коммутатор ([рис. @fig-033])

![Концентратор и коммутатор, соединённые кроссовым кабелем](image/лаба1_33.png){#fig-033 width=70%}

Перешли в режим моделирования (Simulation). Очистили список событий, удалив сценарий моделирования. Выбрали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC0, затем на PC4. Снова выберали на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC4, затем на PC0 ([рис. @fig-034])

![Сценарий для проверки коллизии (3)](image/лаба1_34.png){#fig-034 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за движением пакетов. Сначала возникает коллизия, а затем пакеты успешно достигают пункта назначения. Пакет из сети с концентратором (Hub0) теряется из-за коллизии, а пакет из сети с коммутатором (Switch0) доходит до адресата благодаря полнодуплексному режиму, позволяющему передавать данные в обоих направлениях одновременно. Коммутатор создаёт независимые соединения между портами, что предотвращает коллизии и позволяет работать в полнодуплексном режиме (одновременная передача и приём) ([рис. @fig-035])

![Сценарий с возникновением коллизии (2)](image/лаба1_35.png){#fig-035 width=70%}

Очистили список событий, удалив сценарий моделирования. На панели моделирования нажмали «Play» и в списке событий получили пакеты STP ([рис. @fig-036])

![Пакеты STP](image/лаба1_36.png){#fig-036 width=70%}

Исследовали структуру пакета STP ([рис. @fig-037])

![Информация о PDU: формат пакета STP](image/лаба1_37.png){#fig-037 width=70%}

Есть заголовок STP, который включает в себя поля:

- Идентификатор протокола - 2-х байтовое поле, которое всегда равно нулю
- Версия STP протокола - поле размером в 1 байт, значение которого, всегда равно 0
- Тип сообщения: для BPDU 0 или для TCN 1

и т.д., там очень много(((

Далее изучили кадр Ethernet, который имеет тип 802.3:

- поле преамбулы (7 байт)
- поле длины
- Destination Address (адрес получателя)
- Source Address (адрес отправителя)

Структура MAC-адресов такая же как в ICMP

Перешли в режим реального времени (Realtime). В рабочем пространстве добавили маршрутизатор (Cisco 2811). Соединили прямым кабелем коммутатор и маршрутизатор ([рис. @fig-038]) 

![Коммутатор и маршрутизатор, соединённые прямым кабелем](image/лаба1_38.png){#fig-038 width=70%}

Прописали статический IP-адрес 192.168.1.254 с маской 255.255.255.0 для маршрутизатора, активировали порт, поставив галочку «On» напротив «Port Status» ([рис. @fig-039]) 

![IP-адрес для маршрутизатора](image/лаба1_39.png){#fig-039 width=70%}

Перешли в режим моделирования (Simulation). Очистили список событий, удалив сценарий моделирования. Выберите на панели инструментов «Add Simple PDU (P)» и нажали сначала на PC3, затем на маршрутизатор ([рис. @fig-040]) 

![Передача пакетов с маршрутизатором](image/лаба1_40.png){#fig-040 width=70%}

На панели моделирования нажали кнопку «Play» и проследили за движением пакетов ARP, ICMP, STP и CDP. Сначала посылаются пакеты ARP, затем ICMP. В сети с Hub0 рассылка идет по всем устройствам, а в сети с коммутатором только к пункту назначения. После получения пакета идет идет рассылка STP пакетов всем устройствам сети. Затем появляются пакеты DTP, а потом уже появляются пакеты CDP (используемые оборудованием Cisco для автоматического обнаружения соседних устройств, обмена информацией о типах устройств, версиях, IP-адресах и интерфейсах) ([рис. @fig-041]), ([рис. @fig-042])  

![Пакеты ARP, ICMP, STP и CDP](image/лаба1_41.png){#fig-041 width=70%} 

![Пакеты CDP](image/лаба1_42.png){#fig-042 width=70%} 

Далее исследовали структуру пакета CDP ([рис. @fig-043]), который содержит поля:

- Version - версия протокола CDP
- Time-to-Live (TTL) - время хранения данных
- Контрольная сумма (Checksum) - для проверки целостности пакета
- Type/Length/Value — тип, длина и значение данных

Кадр Ethernet (802.3) такой же как в STP, структура MAC-адресов тоже

![Информация о PDU: формат пакета CDP](image/лаба1_43.png){#fig-043 width=70%}

## Контрольные вопросы + ответы

1. Дайте определение следующим понятиям: концентратор, коммутатор, маршрутизатор, шлюз (gateway). В каких случаях следует использовать тот или иной тип сетевого оборудования?

- Концентратор - устройство, соединяющее устройства в сеть и передающее данные всем портам. Применяется в простых сетях, но вызывает коллизии
- Коммутатор - передаёт данные только нужному порту по MAC-адресу, снижая коллизии. Используется в локальных сетях
- Маршрутизатор - связывает разные сети, маршрутизируя трафик по IP. Применяется для межсетевого взаимодействия
- Шлюз - точка перехода между сетями с разными протоколами

2. Дайте определение следующим понятиям: ip-адрес, сетевая маска, broadcast-адрес.

- IP-адрес - уникальный идентификатор устройства в сети
- Сетевая маска - разделяет IP на адрес сети и узла 
- Broadcast-адрес - адрес для рассылки всем узлам сети

3. Как можно проверить доступность узла сети?

Можно проверить используя утилиту ping. Утилита ping отправляет ICMP-пакеты эхо-запроса
на указанный IP-адрес или доменное имя и ожидает ICMP-ответы эхо-ответа в течение определенного времени. Если ответы получены, узел считается доступным

# Выводы

В ходе выполнения лабораторной работы №1 мы установили инструмент моделирования конфигурации сети Cisco Packet Tracer, познакомились с его интерфейсом и построили простейшую сеть

# Список литературы

1. [Лаборатораня работа №1](https://esystem.rudn.ru/pluginfile.php/3093870/mod_resource/content/11/001-packettracer-without-net.pdf)
2. [firejail](https://firejail.wordpress.com/)
